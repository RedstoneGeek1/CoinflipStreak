<!DOCTYPE html>
<html>
<body style="margin:0;background:black;color:white;font-family:monospace;">
<pre id="out" style="height:100vh; overflow-y:auto; font-size:48px; line-height:1.2;">
Coinflip Simulator
</pre>

<script>
let h = 0;
let counter = 0;
let billion = 0;
let max = 30;
let flip = 1;
const out = document.getElementById("out");

function step() {
  for (let i = 0; i < 1000; i++) {
    do {
      flip = Math.random() < 0.5 ? 1 : 2;
      counter++;
      if (counter === 1_000_000_000) {
        counter = 0;
        billion++;
      }
      h++;
    } while (flip === 1);

    if (h > 29) {
      if (h > max) max = h;
      out.textContent += `${h} in a row - ${billion} billion ${counter} total flips - Maximum: ${max}\n`;
      if (h > max) h = max;
    }
    h = 0;
    flip = 1;
  }
  
  out.scrollTop = out.scrollHeight;
  setTimeout(step, 0);
}

step();
</script>
</body>
</html>
